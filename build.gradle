plugins {
    id 'java-library'
    id 'maven-publish'
}

sourceCompatibility = 1.7 //todo fix Java 7 compatibility, a Java 8 library slipped in by accident
targetCompatibility = 1.7 //it's sort of concerning it even compiles lmao

apply plugin: 'java'

repositories {
	mavenCentral()
	jcenter()
	maven {
		name = 'mojang'
		url = 'https://libraries.minecraft.net/'
	}
}

sourceSets {
   main {
      java {
         srcDir 'src'
      }
   }
}

dependencies {
    // asm
	api 'org.ow2.asm:asm-all:5.2'

	// launchwrapper + dependencies
	api ('net.minecraft:launchwrapper:1.12') {
		transitive = false
	}
	api 'net.sf.jopt-simple:jopt-simple:5.0.3'
}

jar {
	manifest {
		attributes (
			'Main-Class': 'com.zero.retrowrapper.installer.Installer'
		)
	}
}

publishing {
    publications {
        mavenJava(MavenPublication) {
				artifact(file("${project.buildDir}/libs/$archivesBaseName-${version}.jar")) {
					builtBy build
			}
        }
    }
}
